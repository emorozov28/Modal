"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,i,s){return i&&_defineProperties(t.prototype,i),s&&_defineProperties(t,s),t}var Modal=function(){function t(i){_classCallCheck(this,t);this.options=Object.assign({isOpen:function(){},isClose:function(){}},i),this.isOpen=!1,this.isClose=!1,this.modal=document.querySelector("#modal"),this.fixedBlock=document.querySelectorAll(".fixed-block"),this.modalItem=!1,this.elementClick=!1,this.speed=!1,this.animation=!1,this.width=!1,this.position=!1,this.disableScroll=!1,this.zIndex=!1,this.init()}return _createClass(t,[{key:"init",value:function(){if(!this.modal)throw new Error("Selector not found");document.addEventListener("click",function(t){var i=t.target.closest("[data-modal-path]"),s=t.target.closest(".modal__close");if(this.elementClick=i,i){var e=i.dataset.modalPath;this.modalItem=document.querySelector('[data-modal-target="'.concat(e,'"]')),this.open()}s&&this.isOpen&&this.close(),!t.target.closest(".modal__item")&&this.isOpen&&this.close()}.bind(this)),document.addEventListener("keydown",function(t){27===t.keyCode&&this.isOpen&&this.close()}.bind(this))}},{key:"open",value:function(){var t=this,i=this.elementClick.dataset.modalAnimation,s=this.elementClick.dataset.modalSpeed,e=this.elementClick.dataset.modalWidth,o=this.elementClick.dataset.modalPosition,n=["fadeIn","fadeInUp","fadeInDown","fadeInLeft","fadeInRight"],a=n[Math.floor(Math.random()*n.length)];this.speed=Math.abs(parseInt(this.options.speed))?Math.abs(parseInt(this.options.speed)):500,Math.abs(parseInt(s))?this.speed=Math.abs(parseInt(s)):this.speed,"random"===this.options.animation?this.animation=i||a:this.options.animation?this.animation="fadeIn":this.animation="random"===i?a:i,this.width=this.options.width?this.options.width:"600px",e?this.width=e:this.width,this.options.position?this.position=this.options.position:this.position="position-center",o?this.position=o:this.position,!parseInt(this.options.zIndex)||(this.zIndex=parseInt(this.options.zIndex)),console.log(this.disableScroll),this.disableScroll&&this.disableScrollElem(),this.modal.style.zIndex=this.zIndex,this.modal.style.transition=this.speed/1e3+"s",this.modal.classList.add("show"),"top"===this.position?this.modalItem.classList.add("position-top"):"bottom"===this.position&&this.modalItem.classList.add("position-bottom"),this.modalItem.style.transition=this.speed/1e3+"s",this.modalItem.classList.add("show"),this.modalItem.classList.add(this.animation),this.widthElement(),setTimeout(function(){t.options.isOpen(t),t.isOpen=!0,t.modalItem.classList.add("animation-show")},this.speed/1e3)}},{key:"close",value:function(){var t=this;this.modalItem.classList.remove("animation-show"),this.modalItem.style.transition="".concat(this.speed/1e3,"s"),setTimeout(function(){t.options.isClose(t),t.isOpen=!1,t.enableScroll(),t.modalItem.classList.remove(t.animation),t.modalItem.classList.remove("show")},this.speed),setTimeout(function(){t.modal.classList.remove("show")},this.speed/100)}},{key:"widthElement",value:function(){if(this.modalItem.style.width=this.width,this.width.match(/%$/))return this.modalItem.style.width=this.width,void this.modalItem.classList.add("m-0");parseInt(this.width)+100>=document.body.clientWidth?this.modalItem.style.width="auto":this.modalItem.style.width=this.width}},{key:"disableScrollElem",value:function(){var t=window.scrollY;this.lockPadding(),document.body.classList.add("disable--scroll"),document.body.dataset.windowPosition=t,document.body.style.top="-".concat(t,"px")}},{key:"enableScroll",value:function(){var t=document.body.dataset.windowPosition;this.unlockPadding(),document.body.classList.remove("disable--scroll"),document.body.style.top="auto",window.scroll({top:t,left:0})}},{key:"lockPadding",value:function(){var t=window.innerWidth-document.body.offsetWidth;document.body.style.boxSizing="border-box",document.body.style.paddingRight="".concat(t,"px"),this.fixedBlock.forEach(function(i){i.style.paddingRight="".concat(t,"px")}),document.body.style.paddingRight="".concat(t,"px")}},{key:"unlockPadding",value:function(){document.body.removeAttribute("data-window-position"),this.fixedBlock.forEach(function(t){t.style.paddingRight="0px"}),document.body.style.paddingRight="0px"}}]),t}();